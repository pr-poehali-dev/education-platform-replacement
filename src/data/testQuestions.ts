export interface TestQuestion {
  id: string;
  programId: string;
  moduleId?: number;
  question: string;
  options: string[];
  correctAnswer: number;
  explanation?: string;
  difficulty: 'easy' | 'medium' | 'hard';
}

export const testQuestions: TestQuestion[] = [
  {
    id: 'wah-1',
    programId: 'work-at-height',
    moduleId: 1,
    question: 'Какова минимальная высота, с которой работы считаются работами на высоте согласно Приказу № 782н?',
    options: [
      '1,0 метр',
      '1,5 метра',
      '1,8 метра',
      '2,0 метра'
    ],
    correctAnswer: 2,
    explanation: 'Согласно п. 3 Приказа Минтруда России № 782н, к работам на высоте относятся работы, когда существуют риски, связанные с возможным падением работника с высоты 1,8 м и более.',
    difficulty: 'easy'
  },
  {
    id: 'wah-2',
    programId: 'work-at-height',
    moduleId: 2,
    question: 'Как часто должна проводиться проверка средств индивидуальной защиты от падения с высоты перед использованием?',
    options: [
      'Раз в месяц',
      'Перед каждым использованием',
      'Раз в квартал',
      'Раз в год'
    ],
    correctAnswer: 1,
    explanation: 'Согласно требованиям охраны труда, работник обязан проводить осмотр СИЗ от падения перед каждым применением для выявления возможных дефектов.',
    difficulty: 'easy'
  },
  {
    id: 'wah-3',
    programId: 'work-at-height',
    moduleId: 1,
    question: 'Какой максимальный срок действия наряда-допуска на выполнение работ на высоте?',
    options: [
      '1 день',
      '3 дня',
      '5 дней',
      '15 дней'
    ],
    correctAnswer: 3,
    explanation: 'Согласно п. 34 Приказа № 782н, наряд-допуск на производство работ на высоте выдается на срок, необходимый для выполнения работ, но не более чем на 15 календарных дней.',
    difficulty: 'medium'
  },
  {
    id: 'wah-4',
    programId: 'work-at-height',
    moduleId: 3,
    question: 'Какова минимальная прочность анкерного устройства для крепления страховочной системы?',
    options: [
      '10 кН (1000 кг)',
      '15 кН (1500 кг)',
      '22 кН (2200 кг)',
      '30 кН (3000 кг)'
    ],
    correctAnswer: 2,
    explanation: 'Согласно ГОСТ Р ЕН 795-2012, прочность анкерного устройства для одного работника должна составлять не менее 22 кН (2200 кгс).',
    difficulty: 'hard'
  },
  {
    id: 'wah-5',
    programId: 'work-at-height',
    moduleId: 5,
    question: 'Что необходимо сделать в первую очередь при обнаружении пострадавшего, висящего в страховочной привязи без сознания?',
    options: [
      'Немедленно спустить пострадавшего на землю',
      'Начать сердечно-легочную реанимацию на высоте',
      'Вызвать скорую помощь и дождаться специалистов',
      'Освободить пострадавшего от привязи на высоте'
    ],
    correctAnswer: 0,
    explanation: 'Необходимо как можно быстрее спустить пострадавшего на землю, так как длительное пребывание в подвесе может привести к ортостатическому коллапсу (синдрому зависания).',
    difficulty: 'medium'
  },
  {
    id: 'es-1',
    programId: 'electrical-safety',
    moduleId: 1,
    question: 'Какое напряжение в электрической сети переменного тока считается безопасным в нормальных условиях?',
    options: [
      'До 12 В',
      'До 36 В',
      'До 42 В',
      'До 50 В'
    ],
    correctAnswer: 3,
    explanation: 'Согласно ГОСТ 12.1.009-76, безопасным для жизни считается напряжение до 50 В переменного тока в нормальных условиях.',
    difficulty: 'easy'
  },
  {
    id: 'es-2',
    programId: 'electrical-safety',
    moduleId: 3,
    question: 'Каков минимальный допустимый срок периодической проверки знаний по электробезопасности для электротехнического персонала?',
    options: [
      'Раз в 6 месяцев',
      'Раз в год',
      'Раз в 2 года',
      'Раз в 3 года'
    ],
    correctAnswer: 1,
    explanation: 'Согласно Приказу Минэнерго России № 811, периодическая проверка знаний электротехнического персонала проводится не реже одного раза в год.',
    difficulty: 'easy'
  },
  {
    id: 'es-3',
    programId: 'electrical-safety',
    moduleId: 2,
    question: 'Какой цвет изоляции используется для заземляющего проводника?',
    options: [
      'Красный',
      'Синий',
      'Желто-зеленый',
      'Черный'
    ],
    correctAnswer: 2,
    explanation: 'Согласно ПУЭ, заземляющий проводник и проводник защитного заземления должны иметь желто-зеленую изоляцию.',
    difficulty: 'easy'
  },
  {
    id: 'es-4',
    programId: 'electrical-safety',
    moduleId: 5,
    question: 'Какие диэлектрические перчатки относятся к основным электрозащитным средствам в электроустановках до 1000 В?',
    options: [
      'Только резиновые диэлектрические перчатки',
      'Все виды диэлектрических перчаток',
      'Диэлектрические перчатки относятся к дополнительным средствам',
      'Ни один вид перчаток не является основным средством'
    ],
    correctAnswer: 0,
    explanation: 'Согласно п. 1.1.6 Приказа № 903н, диэлектрические перчатки являются основным электрозащитным средством в электроустановках до 1000 В.',
    difficulty: 'medium'
  },
  {
    id: 'es-5',
    programId: 'electrical-safety',
    moduleId: 7,
    question: 'Как правильно освободить пострадавшего от действия электрического тока в установках выше 1000 В?',
    options: [
      'Оттащить пострадавшего за одежду',
      'Отключить электроустановку',
      'Перерубить провода топором с деревянной ручкой',
      'Использовать диэлектрические перчатки'
    ],
    correctAnswer: 1,
    explanation: 'В электроустановках выше 1000 В в первую очередь необходимо отключить электроустановку. Прикасаться к пострадавшему без отключения напряжения опасно для жизни спасающего.',
    difficulty: 'medium'
  },
  {
    id: 'fs-1',
    programId: 'fire-safety',
    moduleId: 2,
    question: 'К какому классу пожара относится горение твердых веществ?',
    options: [
      'Класс A',
      'Класс B',
      'Класс C',
      'Класс D'
    ],
    correctAnswer: 0,
    explanation: 'Согласно классификации пожаров, класс A – пожары твердых горючих веществ и материалов.',
    difficulty: 'easy'
  },
  {
    id: 'fs-2',
    programId: 'fire-safety',
    moduleId: 5,
    question: 'Какой огнетушитель НЕЛЬЗЯ применять для тушения электрооборудования под напряжением?',
    options: [
      'Порошковый',
      'Углекислотный',
      'Воздушно-пенный',
      'Хладоновый'
    ],
    correctAnswer: 2,
    explanation: 'Воздушно-пенные огнетушители содержат воду и могут проводить электрический ток, поэтому их нельзя применять для тушения электрооборудования под напряжением.',
    difficulty: 'easy'
  },
  {
    id: 'fs-3',
    programId: 'fire-safety',
    moduleId: 6,
    question: 'Каков порядок действий при обнаружении пожара?',
    options: [
      'Тушить → вызвать пожарных → эвакуировать',
      'Вызвать пожарных → эвакуировать → тушить',
      'Эвакуировать → вызвать пожарных → тушить',
      'Вызвать пожарных → тушить → эвакуировать'
    ],
    correctAnswer: 1,
    explanation: 'Правильная последовательность: сообщить о пожаре (01, 101, 112), организовать эвакуацию людей, приступить к тушению подручными средствами.',
    difficulty: 'medium'
  },
  {
    id: 'fs-4',
    programId: 'fire-safety',
    moduleId: 2,
    question: 'Какова минимальная ширина эвакуационного выхода из здания?',
    options: [
      '0,7 метра',
      '0,8 метра',
      '1,0 метр',
      '1,2 метра'
    ],
    correctAnswer: 1,
    explanation: 'Согласно СП 1.13130.2020, минимальная ширина эвакуационного выхода из зданий должна составлять не менее 0,8 метра.',
    difficulty: 'medium'
  },
  {
    id: 'fs-5',
    programId: 'fire-safety',
    moduleId: 4,
    question: 'Как часто должна проводиться проверка работоспособности автоматической пожарной сигнализации?',
    options: [
      'Ежедневно',
      'Еженедельно',
      'Ежемесячно',
      'Ежеквартально'
    ],
    correctAnswer: 3,
    explanation: 'Согласно Постановлению Правительства РФ № 1479, техническое обслуживание систем противопожарной защиты должно проводиться не реже одного раза в квартал.',
    difficulty: 'medium'
  },
  {
    id: 'lp-1',
    programId: 'labor-protection',
    moduleId: 1,
    question: 'В течение какого срока работодатель обязан провести обучение по охране труда для вновь принятого работника?',
    options: [
      'В течение первого рабочего дня',
      'В течение первой недели',
      'В течение 60 дней после приема',
      'До начала самостоятельной работы'
    ],
    correctAnswer: 2,
    explanation: 'Согласно Постановлению Правительства № 2464, обучение по охране труда должно быть проведено в течение 60 календарных дней после заключения трудового договора.',
    difficulty: 'easy'
  },
  {
    id: 'lp-2',
    programId: 'labor-protection',
    moduleId: 3,
    question: 'Какова периодичность проведения специальной оценки условий труда (СОУТ)?',
    options: [
      'Раз в 3 года',
      'Раз в 5 лет',
      'Раз в 7 лет',
      'Раз в 10 лет'
    ],
    correctAnswer: 1,
    explanation: 'Согласно ст. 8 Федерального закона № 426-ФЗ, плановая специальная оценка условий труда проводится не реже чем один раз в пять лет.',
    difficulty: 'easy'
  },
  {
    id: 'lp-3',
    programId: 'labor-protection',
    moduleId: 5,
    question: 'Какой вид инструктажа проводится при изменении технологического процесса?',
    options: [
      'Вводный',
      'Первичный',
      'Повторный',
      'Внеплановый'
    ],
    correctAnswer: 3,
    explanation: 'Согласно п. 16 Постановления № 2464, внеплановый инструктаж проводится при изменении технологических процессов, замене оборудования и других факторов, влияющих на безопасность труда.',
    difficulty: 'medium'
  },
  {
    id: 'lp-4',
    programId: 'labor-protection',
    moduleId: 7,
    question: 'В какой срок необходимо сообщить в государственную инспекцию труда о несчастном случае со смертельным исходом?',
    options: [
      'Немедленно',
      'В течение суток',
      'В течение 3 дней',
      'В течение недели'
    ],
    correctAnswer: 0,
    explanation: 'Согласно ст. 228.1 ТК РФ, о несчастном случае со смертельным исходом работодатель обязан незамедлительно (в течение 1 часа) известить государственную инспекцию труда.',
    difficulty: 'medium'
  },
  {
    id: 'lp-5',
    programId: 'labor-protection',
    moduleId: 4,
    question: 'Какой метод оценки профессиональных рисков является наиболее распространенным?',
    options: [
      'Метод Файна-Кинни',
      'Матричный метод',
      'Метод «галстук-бабочка»',
      'Контрольные листы'
    ],
    correctAnswer: 1,
    explanation: 'Матричный метод оценки рисков является одним из самых простых и распространенных методов, рекомендованных для малых и средних предприятий.',
    difficulty: 'hard'
  }
];

export function getQuestionsByProgramId(programId: string, count?: number): TestQuestion[] {
  const programQuestions = testQuestions.filter(q => q.programId === programId);
  
  if (count) {
    // Перемешиваем и берем нужное количество
    return programQuestions
      .sort(() => Math.random() - 0.5)
      .slice(0, count);
  }
  
  return programQuestions;
}

export function getQuestionsByModuleId(programId: string, moduleId: number): TestQuestion[] {
  return testQuestions.filter(q => q.programId === programId && q.moduleId === moduleId);
}

export function getRandomQuestions(count: number): TestQuestion[] {
  return testQuestions
    .sort(() => Math.random() - 0.5)
    .slice(0, count);
}
